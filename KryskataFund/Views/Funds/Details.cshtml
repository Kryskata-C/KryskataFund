@model KryskataFund.Models.Fund
@functions {
    string GetTimeAgo(DateTime dateTime)
    {
        var timeSpan = DateTime.UtcNow - dateTime;
        if (timeSpan.TotalMinutes < 1) return "just now";
        if (timeSpan.TotalMinutes < 60) return $"{(int)timeSpan.TotalMinutes} min ago";
        if (timeSpan.TotalHours < 24) return $"{(int)timeSpan.TotalHours} hours ago";
        if (timeSpan.TotalDays < 7) return $"{(int)timeSpan.TotalDays} days ago";
        return dateTime.ToString("MMM d");
    }
}
@{
    ViewData["Title"] = Model.Title;
    var progressPercent = Model.ProgressPercent;
    var isOverfunded = Model.RaisedAmount > Model.GoalAmount;
    var statusText = isOverfunded ? $"{progressPercent}% funded" : Model.DaysLeft == 0 ? "Ended" : $"{Model.DaysLeft} days left";
    var isSignedIn = ViewBag.IsSignedIn ?? false;
    var isCreator = ViewBag.IsCreator ?? false;
    var fundUpdates = ViewBag.FundUpdates as List<KryskataFund.Models.FundUpdate> ?? new List<KryskataFund.Models.FundUpdate>();
    var signInUrl = Url.Action("SignIn", "Account", new { returnUrl = Context.Request.Path });
}

<div class="page-root">
    <div class="page-shell">
        <!-- Back button -->
        <a asp-controller="Home" asp-action="Index" class="back-link">
            <span class="back-arrow">‚Üê</span>
            Back to campaigns
        </a>

        <div class="fund-detail-grid">
            <!-- Main content -->
            <section class="fund-detail-main">
                <!-- Hero image area -->
                <div class="fund-detail-hero" style="@(Model.ImageUrl != null ? $"background: url('{Model.ImageUrl}') center/cover;" : "")">
                    <div class="fund-detail-hero-gradient"></div>
                    <div class="fund-detail-category-tag" style="--cat-color: @Model.CategoryColor;">
                        <span class="fund-detail-tag-dot" style="background: @Model.CategoryColor; box-shadow: 0 0 10px @Model.CategoryColor;"></span>
                        @Model.Category
                    </div>
                    @if (isOverfunded)
                    {
                        <div class="fund-detail-badge fund-detail-badge--success">
                            Goal reached!
                        </div>
                    }
                </div>

                <!-- Title and story -->
                <div class="fund-detail-content">
                    <h1 class="fund-detail-title">@Model.Title</h1>

                    <div class="fund-detail-creator">
                        <div class="fund-detail-avatar" style="background: linear-gradient(135deg, @Model.CategoryColor, #4da8ff);"></div>
                        <span>Created by <strong>@Model.CreatorName</strong></span>
                    </div>

                    <div class="fund-detail-story">
                        <h2>About this campaign</h2>
                        <p>@Model.Description</p>
                    </div>

                    <!-- Updates section -->
                    <div class="fund-detail-updates">
                        <div class="updates-header">
                            <h2>Updates <span class="updates-count">(@fundUpdates.Count)</span></h2>
                            @if (isCreator)
                            {
                                <button class="btn-post-update" id="openUpdateModal">
                                    <span>+</span> Post Update
                                </button>
                            }
                        </div>

                        <div class="updates-list" id="updatesList">
                            @if (fundUpdates.Count == 0)
                            {
                                <div class="fund-detail-update-empty" id="emptyUpdates">
                                    <span>üì¢</span>
                                    <p>No updates yet</p>
                                    @if (isCreator)
                                    {
                                        <small>Share progress with your supporters!</small>
                                    }
                                    else
                                    {
                                        <small>The creator hasn't posted any updates.</small>
                                    }
                                </div>
                            }
                            else
                            {
                                @foreach (var update in fundUpdates)
                                {
                                    <div class="update-item">
                                        <div class="update-header">
                                            <h3 class="update-title">@update.Title</h3>
                                            <span class="update-date">@update.CreatedAt.ToString("MMM d, yyyy")</span>
                                        </div>
                                        <p class="update-content">@update.Content</p>
                                    </div>
                                }
                            }
                        </div>
                    </div>

                    <!-- Post Update Modal (for creator only) -->
                    @if (isCreator)
                    {
                        <div class="update-modal" id="updateModal">
                            <div class="update-modal-backdrop" id="updateModalBackdrop"></div>
                            <div class="update-modal-content">
                                <div class="update-modal-header">
                                    <h3>üì¢ Post an Update</h3>
                                    <button class="update-modal-close" id="closeUpdateModal">√ó</button>
                                </div>
                                <div class="update-modal-body">
                                    <div class="update-form-group">
                                        <label for="updateTitle">Title</label>
                                        <input type="text" id="updateTitle" placeholder="What's new?" maxlength="200">
                                    </div>
                                    <div class="update-form-group">
                                        <label for="updateContent">Content</label>
                                        <textarea id="updateContent" rows="5" placeholder="Share your progress, milestones, or news with your supporters..."></textarea>
                                    </div>
                                </div>
                                <div class="update-modal-footer">
                                    <button class="btn-update-cancel" id="cancelUpdate">Cancel</button>
                                    <button class="btn-update-submit" id="submitUpdate">Post Update</button>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </section>

            <!-- Sidebar with donation -->
            <aside class="fund-detail-sidebar">
                <div class="fund-detail-card">
                    <!-- Progress section -->
                    <div class="fund-detail-progress-section">
                        <div class="fund-detail-amount">
                            <span class="fund-detail-raised">‚Ç¨@Model.RaisedAmount.ToString("N0")</span>
                            <span class="fund-detail-goal">raised of ‚Ç¨@Model.GoalAmount.ToString("N0") goal</span>
                        </div>

                        <div class="fund-detail-progress-bar">
                            <div class="fund-detail-progress-fill" style="--progress: @Math.Min(100, progressPercent)%;"></div>
                        </div>

                        <div class="fund-detail-stats">
                            <div class="fund-detail-stat">
                                <span class="fund-detail-stat-value">@Model.SupportersCount</span>
                                <span class="fund-detail-stat-label">supporters</span>
                            </div>
                            <div class="fund-detail-stat">
                                <span class="fund-detail-stat-value">@progressPercent%</span>
                                <span class="fund-detail-stat-label">funded</span>
                            </div>
                            <div class="fund-detail-stat">
                                <span class="fund-detail-stat-value">@(Model.DaysLeft == 0 ? "Ended" : Model.DaysLeft.ToString())</span>
                                <span class="fund-detail-stat-label">@(Model.DaysLeft == 0 ? "" : "days left")</span>
                            </div>
                        </div>
                    </div>

                    <!-- Donation buttons -->
                    <div class="fund-detail-donate-section">
                        <div class="fund-detail-quick-amounts">
                            <button class="btn-quick-amount" data-amount="10">‚Ç¨10</button>
                            <button class="btn-quick-amount" data-amount="25">‚Ç¨25</button>
                            <button class="btn-quick-amount" data-amount="50">‚Ç¨50</button>
                            <button class="btn-quick-amount" data-amount="100">‚Ç¨100</button>
                            <div class="btn-custom-amount">
                                <span class="custom-amount-label">‚Ç¨</span>
                                <input type="number" class="custom-amount-input" placeholder="Custom" min="1" id="customAmount">
                            </div>
                        </div>

                        <div class="selected-amount-display" id="selectedAmountDisplay">
                            <span class="selected-amount-label">Your donation</span>
                            <span class="selected-amount-value">‚Ç¨<span id="animatedAmount">0</span></span>
                        </div>

                        <button class="btn-donate btn-donate--primary" id="donateBtn">
                            <span class="btn-donate-icon">üíö</span>
                            Donate now
                        </button>

                        <button class="btn-donate btn-donate--ghost">
                            <span class="btn-donate-icon">üîó</span>
                            Share campaign
                        </button>
                    </div>

                    <!-- Recent supporters -->
                    <div class="fund-detail-supporters">
                        <h3>Recent supporters</h3>
                        <div class="fund-detail-supporter-list" id="supportersList">
                            @{
                                var donations = ViewBag.RecentDonations as List<KryskataFund.Models.Donation> ?? new List<KryskataFund.Models.Donation>();
                                var colors = new[] {
                                    "linear-gradient(135deg, #22c55e, #4ade80)",
                                    "linear-gradient(135deg, #4f46e5, #22d3ee)",
                                    "linear-gradient(135deg, #f97316, #fb7185)",
                                    "linear-gradient(135deg, #a855f7, #ec4899)",
                                    "linear-gradient(135deg, #facc15, #fb923c)"
                                };
                                var initialShow = 3;
                            }
                            @if (donations.Count == 0)
                            {
                                <div class="fund-detail-no-supporters" style="text-align: center; padding: 20px; color: var(--text-muted);">
                                    <p style="font-size: 13px;">No supporters yet. Be the first!</p>
                                </div>
                            }
                            else
                            {
                                var index = 0;
                                @foreach (var donation in donations)
                                {
                                    var colorIndex = Math.Abs(donation.DonorName.GetHashCode()) % colors.Length;
                                    var timeAgo = GetTimeAgo(donation.CreatedAt);
                                    var isHidden = index >= initialShow;
                                    <div class="fund-detail-supporter @(isHidden ? "supporter-hidden" : "")" data-index="@index" style="@(isHidden ? "display: none;" : "")">
                                        <div class="fund-detail-supporter-avatar" style="background: @colors[colorIndex];"></div>
                                        <div class="fund-detail-supporter-info">
                                            <span class="fund-detail-supporter-name">@donation.DonorName</span>
                                            <span class="fund-detail-supporter-amount">‚Ç¨@donation.Amount.ToString("N0")</span>
                                        </div>
                                        <span class="fund-detail-supporter-time">@timeAgo</span>
                                    </div>
                                    index++;
                                }
                            }
                        </div>
                        @if (Model.SupportersCount > 3)
                        {
                            <div class="supporters-expand-section">
                                <button type="button" class="fund-detail-see-all" id="toggleSupportersBtn" data-expanded="false">
                                    <span id="toggleText">See all @Model.SupportersCount supporters</span>
                                    <span class="toggle-arrow" id="toggleArrow">‚Üì</span>
                                </button>
                                <div class="supporters-pagination" id="supportersPagination" style="display: none;">
                                    <button type="button" class="pagination-btn" id="prevPageBtn" disabled>‚Üê</button>
                                    <span class="pagination-info" id="paginationInfo">Page 1</span>
                                    <button type="button" class="pagination-btn" id="nextPageBtn">‚Üí</button>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </aside>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const quickAmountBtns = document.querySelectorAll('.btn-quick-amount');
            const customAmountInput = document.getElementById('customAmount');
            const selectedAmountDisplay = document.getElementById('selectedAmountDisplay');
            const animatedAmountSpan = document.getElementById('animatedAmount');
            const donateBtn = document.getElementById('donateBtn');

            let currentAmount = 0;
            let isAnimating = false;

            // Count up animation function
            function animateCountUp(targetAmount, duration = 600) {
                if (isAnimating) return;
                isAnimating = true;

                const startAmount = 0;
                const startTime = performance.now();

                // Show the display with animation
                selectedAmountDisplay.classList.add('visible');

                function updateCount(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);

                    // Easing function (ease out cubic)
                    const easeProgress = 1 - Math.pow(1 - progress, 3);

                    const currentValue = Math.floor(startAmount + (targetAmount - startAmount) * easeProgress);
                    animatedAmountSpan.textContent = currentValue;

                    if (progress < 1) {
                        requestAnimationFrame(updateCount);
                    } else {
                        animatedAmountSpan.textContent = targetAmount;
                        isAnimating = false;
                    }
                }

                requestAnimationFrame(updateCount);
            }

            // Handle quick amount button clicks
            quickAmountBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    quickAmountBtns.forEach(b => b.classList.remove('active'));
                    customAmountInput.classList.remove('active');
                    customAmountInput.value = '';

                    // Add active class to clicked button
                    this.classList.add('active');

                    const amount = parseInt(this.dataset.amount);
                    currentAmount = amount;
                    animateCountUp(amount);
                });
            });

            // Handle custom amount input
            customAmountInput.addEventListener('input', function() {
                quickAmountBtns.forEach(b => b.classList.remove('active'));

                const amount = parseInt(this.value) || 0;
                if (amount > 0) {
                    this.classList.add('active');
                    currentAmount = amount;
                    animateCountUp(amount);
                } else {
                    this.classList.remove('active');
                    selectedAmountDisplay.classList.remove('visible');
                }
            });

            customAmountInput.addEventListener('focus', function() {
                quickAmountBtns.forEach(b => b.classList.remove('active'));
            });

            // Handle donate button click
            const fundId = @Model.Id;

            donateBtn.addEventListener('click', function() {
                if (currentAmount > 0) {
                    // Redirect to payment page
                    window.location.href = '/Funds/Donate?id=' + fundId + '&amount=' + currentAmount;
                } else {
                    // Shake animation if no amount selected
                    selectedAmountDisplay.classList.add('shake');
                    setTimeout(() => selectedAmountDisplay.classList.remove('shake'), 500);
                }
            });

            // Supporters expand/collapse with pagination
            const toggleBtn = document.getElementById('toggleSupportersBtn');
            const toggleText = document.getElementById('toggleText');
            const toggleArrow = document.getElementById('toggleArrow');
            const pagination = document.getElementById('supportersPagination');
            const prevBtn = document.getElementById('prevPageBtn');
            const nextBtn = document.getElementById('nextPageBtn');
            const pageInfo = document.getElementById('paginationInfo');
            const supporters = document.querySelectorAll('.fund-detail-supporter');

            const totalSupporters = @Model.SupportersCount;
            const itemsPerPage = 5;
            let currentPage = 1;
            let isExpanded = false;

            function updatePagination() {
                const totalPages = Math.ceil(supporters.length / itemsPerPage);
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, supporters.length);

                supporters.forEach((supporter, index) => {
                    if (isExpanded) {
                        if (index >= startIndex && index < endIndex) {
                            supporter.style.display = '';
                            supporter.style.animation = 'fadeSlideIn 0.3s ease forwards';
                            supporter.style.animationDelay = `${(index - startIndex) * 0.05}s`;
                        } else {
                            supporter.style.display = 'none';
                        }
                    } else {
                        // Show only first 3 when collapsed
                        supporter.style.display = index < 3 ? '' : 'none';
                    }
                });

                if (pageInfo) pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
                if (prevBtn) prevBtn.disabled = currentPage === 1;
                if (nextBtn) nextBtn.disabled = currentPage === totalPages || totalPages === 0;
            }

            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    isExpanded = !isExpanded;

                    if (isExpanded) {
                        toggleText.textContent = 'Show less';
                        toggleArrow.textContent = '‚Üë';
                        toggleArrow.style.transform = 'rotate(180deg)';
                        if (pagination && supporters.length > itemsPerPage) {
                            pagination.style.display = 'flex';
                        }
                        currentPage = 1;
                    } else {
                        toggleText.textContent = `See all ${totalSupporters} supporters`;
                        toggleArrow.textContent = '‚Üì';
                        toggleArrow.style.transform = 'rotate(0deg)';
                        if (pagination) pagination.style.display = 'none';
                    }

                    updatePagination();
                });
            }

            if (prevBtn) {
                prevBtn.addEventListener('click', function() {
                    if (currentPage > 1) {
                        currentPage--;
                        updatePagination();
                    }
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', function() {
                    const totalPages = Math.ceil(supporters.length / itemsPerPage);
                    if (currentPage < totalPages) {
                        currentPage++;
                        updatePagination();
                    }
                });
            }

            // Updates modal functionality
            const openModalBtn = document.getElementById('openUpdateModal');
            const closeModalBtn = document.getElementById('closeUpdateModal');
            const cancelBtn = document.getElementById('cancelUpdate');
            const submitBtn = document.getElementById('submitUpdate');
            const updateModal = document.getElementById('updateModal');
            const modalBackdrop = document.getElementById('updateModalBackdrop');
            const updateTitle = document.getElementById('updateTitle');
            const updateContent = document.getElementById('updateContent');
            const updatesList = document.getElementById('updatesList');
            const emptyUpdates = document.getElementById('emptyUpdates');

            function openModal() {
                if (updateModal) {
                    updateModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }

            function closeModal() {
                if (updateModal) {
                    updateModal.classList.remove('active');
                    document.body.style.overflow = '';
                    if (updateTitle) updateTitle.value = '';
                    if (updateContent) updateContent.value = '';
                }
            }

            if (openModalBtn) openModalBtn.addEventListener('click', openModal);
            if (closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
            if (cancelBtn) cancelBtn.addEventListener('click', closeModal);
            if (modalBackdrop) modalBackdrop.addEventListener('click', closeModal);

            if (submitBtn) {
                submitBtn.addEventListener('click', async function() {
                    const title = updateTitle.value.trim();
                    const content = updateContent.value.trim();

                    if (!title || !content) {
                        alert('Please fill in both title and content');
                        return;
                    }

                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Posting...';

                    try {
                        const response = await fetch('/Funds/PostUpdate', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                            body: `fundId=${fundId}&title=${encodeURIComponent(title)}&content=${encodeURIComponent(content)}`
                        });

                        const data = await response.json();

                        if (data.success) {
                            // Hide empty state if visible
                            if (emptyUpdates) emptyUpdates.style.display = 'none';

                            // Add the new update to the list
                            const updateHtml = `
                                <div class="update-item new-update">
                                    <div class="update-header">
                                        <h3 class="update-title">${data.update.title}</h3>
                                        <span class="update-date">${data.update.createdAt}</span>
                                    </div>
                                    <p class="update-content">${data.update.content}</p>
                                </div>
                            `;
                            updatesList.insertAdjacentHTML('afterbegin', updateHtml);

                            // Update the count
                            const countSpan = document.querySelector('.updates-count');
                            if (countSpan) {
                                const currentCount = parseInt(countSpan.textContent.match(/\d+/) || 0);
                                countSpan.textContent = `(${currentCount + 1})`;
                            }

                            closeModal();
                        } else {
                            alert(data.message || 'Failed to post update');
                        }
                    } catch (error) {
                        alert('An error occurred. Please try again.');
                    }

                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Post Update';
                });
            }
        });
    </script>

    <style>
        .supporters-expand-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 12px;
        }

        .fund-detail-see-all {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(70, 230, 164, 0.1);
            border: 1px solid rgba(70, 230, 164, 0.3);
            border-radius: 10px;
            color: #46e6a4;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fund-detail-see-all:hover {
            background: rgba(70, 230, 164, 0.2);
            border-color: rgba(70, 230, 164, 0.5);
        }

        .toggle-arrow {
            transition: transform 0.3s ease;
        }

        .supporters-pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .pagination-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background: rgba(70, 230, 164, 0.15);
            border-color: rgba(70, 230, 164, 0.4);
            color: #46e6a4;
        }

        .pagination-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .pagination-info {
            font-size: 12px;
            color: var(--text-muted);
        }

        .fund-detail-supporter {
            opacity: 0;
            animation: fadeSlideIn 0.3s ease forwards;
        }

        @@keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Updates Section Styles */
        .updates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .updates-header h2 {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .updates-count {
            font-size: 14px;
            font-weight: 400;
            color: var(--text-muted);
        }

        .btn-post-update {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: linear-gradient(135deg, #46e6a4 0%, #22d3ee 100%);
            border: none;
            border-radius: 10px;
            color: #050509;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-post-update:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(70, 230, 164, 0.4);
        }

        .updates-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .fund-detail-update-empty {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px dashed rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }

        .fund-detail-update-empty span {
            font-size: 32px;
            display: block;
            margin-bottom: 12px;
        }

        .fund-detail-update-empty p {
            color: var(--text-muted);
            font-size: 14px;
            margin-bottom: 4px;
        }

        .fund-detail-update-empty small {
            color: var(--text-muted);
            font-size: 12px;
            opacity: 0.7;
        }

        .update-item {
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .update-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(70, 230, 164, 0.2);
        }

        .update-item.new-update {
            animation: slideInUpdate 0.4s ease;
            border-color: rgba(70, 230, 164, 0.4);
            box-shadow: 0 0 20px rgba(70, 230, 164, 0.1);
        }

        @@keyframes slideInUpdate {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .update-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .update-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-main);
        }

        .update-date {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .update-content {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Update Modal */
        .update-modal {
            position: fixed;
            inset: 0;
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .update-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .update-modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(5, 5, 9, 0.9);
            backdrop-filter: blur(8px);
        }

        .update-modal-content {
            position: relative;
            width: 90%;
            max-width: 500px;
            background: linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(12, 14, 25, 0.98) 100%);
            border: 1px solid rgba(70, 230, 164, 0.2);
            border-radius: 20px;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
        }

        .update-modal.active .update-modal-content {
            transform: scale(1) translateY(0);
        }

        .update-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .update-modal-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .update-modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            color: var(--text-muted);
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .update-modal-close:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .update-modal-body {
            padding: 24px;
        }

        .update-form-group {
            margin-bottom: 16px;
        }

        .update-form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .update-form-group input,
        .update-form-group textarea {
            width: 100%;
            padding: 12px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-main);
            font-size: 14px;
            transition: all 0.2s ease;
            resize: vertical;
        }

        .update-form-group input:focus,
        .update-form-group textarea:focus {
            outline: none;
            border-color: rgba(70, 230, 164, 0.5);
            background: rgba(70, 230, 164, 0.05);
        }

        .update-form-group input::placeholder,
        .update-form-group textarea::placeholder {
            color: var(--text-muted);
        }

        .update-modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
        }

        .btn-update-cancel {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-muted);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-update-cancel:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-update-submit {
            padding: 10px 24px;
            background: linear-gradient(135deg, #46e6a4 0%, #22d3ee 100%);
            border: none;
            border-radius: 10px;
            color: #050509;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-update-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(70, 230, 164, 0.4);
        }

        .btn-update-submit:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
    </style>
}
