@{
    ViewData["Title"] = "Admin Dashboard";
    var allUsers = ViewBag.AllUsers as List<KryskataFund.Models.User>;
    var allFunds = ViewBag.AllFunds as List<KryskataFund.Models.Fund>;
    var allDonations = ViewBag.AllDonations as List<KryskataFund.Models.Donation>;
}

<div class="admin-dashboard">
    <!-- Header -->
    <div class="admin-header">
        <div class="admin-title">
            <h1>Admin Dashboard</h1>
            <p>Manage your platform</p>
        </div>
        <div class="admin-quick-stats">
            <span class="live-indicator"></span>
            <span>System Online</span>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="admin-stats-grid">
        <div class="admin-stat-card stat-users">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">@ViewBag.TotalUsers</span>
                <span class="stat-label">Total Users</span>
            </div>
        </div>

        <div class="admin-stat-card stat-funds">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                    <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">@ViewBag.TotalFunds</span>
                <span class="stat-label">Total Campaigns</span>
            </div>
        </div>

        <div class="admin-stat-card stat-donations">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">@ViewBag.TotalDonations</span>
                <span class="stat-label">Total Donations</span>
            </div>
        </div>

        <div class="admin-stat-card stat-raised">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">$@ViewBag.TotalRaised.ToString("N0")</span>
                <span class="stat-label">Total Raised</span>
            </div>
        </div>

        <div class="admin-stat-card stat-active">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">@ViewBag.ActiveCampaigns</span>
                <span class="stat-label">Active Campaigns</span>
            </div>
        </div>

        <div class="admin-stat-card stat-completed">
            <div class="stat-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            <div class="stat-content">
                <span class="stat-number">@ViewBag.CompletedCampaigns</span>
                <span class="stat-label">Fully Funded</span>
            </div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="admin-tabs">
        <button class="admin-tab active" data-tab="users">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
            </svg>
            Users
        </button>
        <button class="admin-tab" data-tab="funds">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
            </svg>
            Campaigns
        </button>
        <button class="admin-tab" data-tab="donations">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            Donations
        </button>
    </div>

    <!-- Tab Content -->
    <div class="admin-tab-content">
        <!-- Users Tab -->
        <div class="admin-panel" id="users-panel">
            <div class="panel-header">
                <h2>User Management</h2>
                <span class="panel-count">@allUsers?.Count users</span>
            </div>
            <div class="admin-table-wrapper">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Email</th>
                            <th>Joined</th>
                            <th>Role</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (allUsers != null)
                        {
                            @foreach (var user in allUsers)
                            {
                                <tr data-user-id="@user.Id">
                                    <td class="id-cell">#@user.Id</td>
                                    <td class="email-cell">@user.Email</td>
                                    <td class="date-cell">@user.CreatedAt.ToString("MMM d, yyyy")</td>
                                    <td class="role-cell">
                                        <span class="role-badge @(user.IsAdmin ? "role-admin" : "role-user")">
                                            @(user.IsAdmin ? "Admin" : "User")
                                        </span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn toggle-admin-btn" onclick="toggleAdmin(@user.Id)" title="Toggle Admin">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                            </svg>
                                        </button>
                                        <button class="action-btn delete-btn" onclick="deleteUser(@user.Id)" title="Delete User">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <polyline points="3 6 5 6 21 6"></polyline>
                                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Funds Tab -->
        <div class="admin-panel hidden" id="funds-panel">
            <div class="panel-header">
                <h2>Campaign Management</h2>
                <span class="panel-count">@allFunds?.Count campaigns</span>
            </div>
            <div class="admin-table-wrapper">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Creator</th>
                            <th>Category</th>
                            <th>Status</th>
                            <th>Progress</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (allFunds != null)
                        {
                            @foreach (var fund in allFunds)
                            {
                                <tr data-fund-id="@fund.Id">
                                    <td class="id-cell">#@fund.Id</td>
                                    <td class="title-cell">
                                        <a href="/Funds/Details/@fund.Id" target="_blank">@fund.Title</a>
                                    </td>
                                    <td class="creator-cell">@fund.CreatorName</td>
                                    <td class="category-cell">
                                        <span class="category-badge" style="background: @fund.CategoryColor">@fund.Category</span>
                                    </td>
                                    <td class="status-cell">
                                        <span class="verified-badge-admin @(fund.IsVerified ? "verified" : "")">
                                            @(fund.IsVerified ? "Verified" : "Unverified")
                                        </span>
                                    </td>
                                    <td class="progress-cell">
                                        <div class="mini-progress">
                                            <div class="mini-progress-bar" style="width: @fund.ProgressPercent%"></div>
                                        </div>
                                        <span>$@fund.RaisedAmount.ToString("N0") / $@fund.GoalAmount.ToString("N0")</span>
                                    </td>
                                    <td class="actions-cell">
                                        <button class="action-btn verify-btn @(fund.IsVerified ? "active" : "")" onclick="toggleVerified(@fund.Id)" title="@(fund.IsVerified ? "Remove Verification" : "Verify Fund")">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                            </svg>
                                        </button>
                                        <button class="action-btn edit-btn" onclick="editFund(@fund.Id, '@fund.Title.Replace("'", "\\'")', '@fund.Description.Replace("'", "\\'").Replace("\n", "\\n")', @fund.GoalAmount)" title="Edit">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                            </svg>
                                        </button>
                                        <button class="action-btn add-funds-btn" onclick="addFundsToFund(@fund.Id)" title="Add Funds">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                            </svg>
                                        </button>
                                        <button class="action-btn delete-btn" onclick="deleteFund(@fund.Id)" title="Delete">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <polyline points="3 6 5 6 21 6"></polyline>
                                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Donations Tab -->
        <div class="admin-panel hidden" id="donations-panel">
            <div class="panel-header">
                <h2>Donation Management</h2>
                <span class="panel-count">@allDonations?.Count donations</span>
            </div>
            <div class="admin-table-wrapper">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Donor</th>
                            <th>Amount</th>
                            <th>Campaign</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (allDonations != null && allFunds != null)
                        {
                            @foreach (var donation in allDonations)
                            {
                                var fund = allFunds.FirstOrDefault(f => f.Id == donation.FundId);
                                <tr data-donation-id="@donation.Id">
                                    <td class="id-cell">#@donation.Id</td>
                                    <td class="donor-cell">@donation.DonorName</td>
                                    <td class="amount-cell">$@donation.Amount.ToString("N0")</td>
                                    <td class="fund-cell">
                                        <a href="/Funds/Details/@donation.FundId" target="_blank">@(fund?.Title ?? "Unknown")</a>
                                    </td>
                                    <td class="date-cell">@donation.CreatedAt.ToString("MMM d, yyyy HH:mm")</td>
                                    <td class="actions-cell">
                                        <button class="action-btn refund-btn" onclick="refundDonation(@donation.Id)" title="Refund & Delete">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                                <polyline points="1 4 1 10 7 10"></polyline>
                                                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Edit Fund Modal -->
<div class="admin-modal" id="editFundModal">
    <div class="admin-modal-content">
        <div class="admin-modal-header">
            <h3>Edit Campaign</h3>
            <button class="modal-close" onclick="closeModal('editFundModal')">&times;</button>
        </div>
        <div class="admin-modal-body">
            <input type="hidden" id="editFundId">
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="editFundTitle" class="admin-input">
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="editFundDescription" class="admin-textarea" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label>Goal Amount ($)</label>
                <input type="number" id="editFundGoal" class="admin-input">
            </div>
        </div>
        <div class="admin-modal-footer">
            <button class="admin-btn admin-btn-secondary" onclick="closeModal('editFundModal')">Cancel</button>
            <button class="admin-btn admin-btn-primary" onclick="saveFundEdit()">Save Changes</button>
        </div>
    </div>
</div>

<!-- Add Funds Modal -->
<div class="admin-modal" id="addFundsModal">
    <div class="admin-modal-content">
        <div class="admin-modal-header">
            <h3>Add Funds to Campaign</h3>
            <button class="modal-close" onclick="closeModal('addFundsModal')">&times;</button>
        </div>
        <div class="admin-modal-body">
            <input type="hidden" id="addFundsFundId">
            <div class="form-group">
                <label>Amount to Add ($)</label>
                <input type="number" id="addFundsAmount" class="admin-input" placeholder="100">
            </div>
            <p class="modal-note">This will directly add funds to the campaign (admin override).</p>
        </div>
        <div class="admin-modal-footer">
            <button class="admin-btn admin-btn-secondary" onclick="closeModal('addFundsModal')">Cancel</button>
            <button class="admin-btn admin-btn-primary" onclick="saveAddFunds()">Add Funds</button>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div class="admin-toast" id="adminToast">
    <span class="toast-message"></span>
</div>

@section Scripts {
    <script>
        // Tab switching
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.admin-panel').forEach(p => p.classList.add('hidden'));

                tab.classList.add('active');
                document.getElementById(tab.dataset.tab + '-panel').classList.remove('hidden');
            });
        });

        // Toast notification
        function showToast(message, isError = false) {
            const toast = document.getElementById('adminToast');
            toast.querySelector('.toast-message').textContent = message;
            toast.className = 'admin-toast show' + (isError ? ' error' : '');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // User actions
        async function deleteUser(id) {
            if (!confirm('Are you sure you want to delete this user? This will also delete all their campaigns and donations.')) return;

            const response = await fetch('/Admin/DeleteUser', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}`
            });
            const data = await response.json();

            if (data.success) {
                document.querySelector(`tr[data-user-id="${id}"]`).remove();
                showToast(data.message);
            } else {
                showToast(data.message, true);
            }
        }

        async function toggleAdmin(id) {
            const response = await fetch('/Admin/ToggleAdmin', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}`
            });
            const data = await response.json();

            if (data.success) {
                const badge = document.querySelector(`tr[data-user-id="${id}"] .role-badge`);
                badge.textContent = data.isAdmin ? 'Admin' : 'User';
                badge.className = 'role-badge ' + (data.isAdmin ? 'role-admin' : 'role-user');
                showToast(data.message);
            } else {
                showToast(data.message, true);
            }
        }

        // Fund actions
        function editFund(id, title, description, goal) {
            document.getElementById('editFundId').value = id;
            document.getElementById('editFundTitle').value = title;
            document.getElementById('editFundDescription').value = description;
            document.getElementById('editFundGoal').value = goal;
            document.getElementById('editFundModal').classList.add('show');
        }

        async function saveFundEdit() {
            const id = document.getElementById('editFundId').value;
            const title = document.getElementById('editFundTitle').value;
            const description = document.getElementById('editFundDescription').value;
            const goalAmount = document.getElementById('editFundGoal').value;

            const response = await fetch('/Admin/EditFund', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}&title=${encodeURIComponent(title)}&description=${encodeURIComponent(description)}&goalAmount=${goalAmount}`
            });
            const data = await response.json();

            if (data.success) {
                closeModal('editFundModal');
                showToast(data.message);
                location.reload();
            } else {
                showToast(data.message, true);
            }
        }

        function addFundsToFund(id) {
            document.getElementById('addFundsFundId').value = id;
            document.getElementById('addFundsAmount').value = '';
            document.getElementById('addFundsModal').classList.add('show');
        }

        async function saveAddFunds() {
            const id = document.getElementById('addFundsFundId').value;
            const amount = document.getElementById('addFundsAmount').value;

            if (!amount || amount <= 0) {
                showToast('Please enter a valid amount', true);
                return;
            }

            const response = await fetch('/Admin/AddFundsToFund', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}&amount=${amount}`
            });
            const data = await response.json();

            if (data.success) {
                closeModal('addFundsModal');
                showToast(data.message);
                location.reload();
            } else {
                showToast(data.message, true);
            }
        }

        async function deleteFund(id) {
            if (!confirm('Are you sure you want to delete this campaign? This will also delete all donations to it.')) return;

            const response = await fetch('/Admin/DeleteFund', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}`
            });
            const data = await response.json();

            if (data.success) {
                document.querySelector(`tr[data-fund-id="${id}"]`).remove();
                showToast(data.message);
            } else {
                showToast(data.message, true);
            }
        }

        async function toggleVerified(id) {
            const response = await fetch('/Admin/ToggleVerified', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}`
            });
            const data = await response.json();

            if (data.success) {
                const row = document.querySelector(`tr[data-fund-id="${id}"]`);
                const badge = row.querySelector('.verified-badge-admin');
                const btn = row.querySelector('.verify-btn');

                if (data.isVerified) {
                    badge.classList.add('verified');
                    badge.textContent = 'Verified';
                    btn.classList.add('active');
                    btn.title = 'Remove Verification';
                } else {
                    badge.classList.remove('verified');
                    badge.textContent = 'Unverified';
                    btn.classList.remove('active');
                    btn.title = 'Verify Fund';
                }
                showToast(data.message);
            } else {
                showToast(data.message, true);
            }
        }

        // Donation actions
        async function refundDonation(id) {
            if (!confirm('Are you sure you want to refund and delete this donation?')) return;

            const response = await fetch('/Admin/DeleteDonation', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `id=${id}`
            });
            const data = await response.json();

            if (data.success) {
                document.querySelector(`tr[data-donation-id="${id}"]`).remove();
                showToast(data.message);
            } else {
                showToast(data.message, true);
            }
        }

        // Modal functions
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Close modal on outside click
        document.querySelectorAll('.admin-modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });
    </script>
}

<style>
    .admin-dashboard {
        padding: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .admin-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
    }

    .admin-title h1 {
        font-size: 28px;
        font-weight: 800;
        color: #fff;
        margin: 0;
    }

    .admin-title p {
        color: var(--text-muted);
        margin: 5px 0 0;
    }

    .admin-quick-stats {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        background: rgba(74, 222, 128, 0.1);
        border-radius: 20px;
        color: #4ade80;
        font-size: 14px;
    }

    .live-indicator {
        width: 8px;
        height: 8px;
        background: #4ade80;
        border-radius: 50%;
        animation: pulse 2s infinite;
    }

    @@keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* Stats Grid */
    .admin-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .admin-stat-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
        transition: all 0.3s ease;
    }

    .admin-stat-card:hover {
        transform: translateY(-2px);
        border-color: rgba(255, 255, 255, 0.1);
    }

    .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .stat-icon svg {
        width: 24px;
        height: 24px;
    }

    .stat-users .stat-icon { background: rgba(74, 222, 128, 0.15); color: #4ade80; }
    .stat-funds .stat-icon { background: rgba(34, 211, 238, 0.15); color: #22d3ee; }
    .stat-donations .stat-icon { background: rgba(249, 115, 22, 0.15); color: #f97316; }
    .stat-raised .stat-icon { background: rgba(168, 85, 247, 0.15); color: #a855f7; }
    .stat-active .stat-icon { background: rgba(250, 204, 21, 0.15); color: #facc15; }
    .stat-completed .stat-icon { background: rgba(239, 68, 68, 0.15); color: #ef4444; }

    .stat-content {
        display: flex;
        flex-direction: column;
    }

    .stat-number {
        font-size: 24px;
        font-weight: 700;
        color: #fff;
    }

    .stat-label {
        font-size: 13px;
        color: var(--text-muted);
    }

    /* Tabs */
    .admin-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        padding-bottom: 20px;
    }

    .admin-tab {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 10px;
        color: var(--text-muted);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .admin-tab:hover {
        background: rgba(255, 255, 255, 0.06);
        color: #fff;
    }

    .admin-tab.active {
        background: rgba(239, 68, 68, 0.15);
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;
    }

    /* Panels */
    .admin-panel {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        overflow: hidden;
    }

    .admin-panel.hidden {
        display: none;
    }

    .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 25px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .panel-header h2 {
        font-size: 18px;
        font-weight: 600;
        color: #fff;
        margin: 0;
    }

    .panel-count {
        font-size: 13px;
        color: var(--text-muted);
        background: rgba(255, 255, 255, 0.05);
        padding: 5px 12px;
        border-radius: 20px;
    }

    /* Table */
    .admin-table-wrapper {
        overflow-x: auto;
    }

    .admin-table {
        width: 100%;
        border-collapse: collapse;
    }

    .admin-table th {
        text-align: left;
        padding: 15px 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--text-muted);
        background: rgba(255, 255, 255, 0.02);
    }

    .admin-table td {
        padding: 15px 20px;
        font-size: 14px;
        color: var(--text-secondary);
        border-top: 1px solid rgba(255, 255, 255, 0.04);
    }

    .admin-table tr:hover td {
        background: rgba(255, 255, 255, 0.02);
    }

    .id-cell {
        color: var(--text-muted);
        font-family: monospace;
    }

    .email-cell, .title-cell a, .fund-cell a {
        color: #fff;
        font-weight: 500;
    }

    .title-cell a, .fund-cell a {
        text-decoration: none;
    }

    .title-cell a:hover, .fund-cell a:hover {
        color: #4ade80;
    }

    .role-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
    }

    .role-admin {
        background: rgba(239, 68, 68, 0.15);
        color: #ef4444;
    }

    .role-user {
        background: rgba(74, 222, 128, 0.15);
        color: #4ade80;
    }

    .category-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        color: #000;
    }

    .mini-progress {
        width: 80px;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 4px;
    }

    .mini-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #4ade80, #22d3ee);
        border-radius: 3px;
    }

    .progress-cell span {
        font-size: 12px;
        color: var(--text-muted);
    }

    .amount-cell {
        color: #4ade80 !important;
        font-weight: 600;
    }

    /* Action Buttons */
    .actions-cell {
        display: flex;
        gap: 8px;
    }

    .action-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.03);
        color: var(--text-muted);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
    }

    .action-btn:hover {
        background: rgba(255, 255, 255, 0.08);
        color: #fff;
    }

    .delete-btn:hover, .refund-btn:hover {
        background: rgba(239, 68, 68, 0.15);
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;
    }

    .toggle-admin-btn:hover {
        background: rgba(168, 85, 247, 0.15);
        border-color: rgba(168, 85, 247, 0.3);
        color: #a855f7;
    }

    .edit-btn:hover {
        background: rgba(34, 211, 238, 0.15);
        border-color: rgba(34, 211, 238, 0.3);
        color: #22d3ee;
    }

    .add-funds-btn:hover {
        background: rgba(74, 222, 128, 0.15);
        border-color: rgba(74, 222, 128, 0.3);
        color: #4ade80;
    }

    /* Modal */
    .admin-modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        align-items: center;
        justify-content: center;
    }

    .admin-modal.show {
        display: flex;
    }

    .admin-modal-content {
        background: #0f0f14;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        width: 100%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
    }

    .admin-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 25px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .admin-modal-header h3 {
        font-size: 18px;
        font-weight: 600;
        color: #fff;
        margin: 0;
    }

    .modal-close {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-muted);
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-close:hover {
        background: rgba(239, 68, 68, 0.15);
        color: #ef4444;
    }

    .admin-modal-body {
        padding: 25px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        font-size: 13px;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 8px;
    }

    .admin-input, .admin-textarea {
        width: 100%;
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        color: #fff;
        font-size: 14px;
        transition: all 0.2s ease;
    }

    .admin-input:focus, .admin-textarea:focus {
        outline: none;
        border-color: #ef4444;
        background: rgba(255, 255, 255, 0.05);
    }

    .admin-textarea {
        resize: vertical;
        min-height: 100px;
    }

    .modal-note {
        font-size: 13px;
        color: var(--text-muted);
        margin: 0;
    }

    .admin-modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        padding: 20px 25px;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
    }

    .admin-btn {
        padding: 10px 20px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .admin-btn-secondary {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
    }

    .admin-btn-secondary:hover {
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
    }

    .admin-btn-primary {
        background: #ef4444;
        border: none;
        color: #fff;
    }

    .admin-btn-primary:hover {
        background: #dc2626;
    }

    /* Toast */
    .admin-toast {
        position: fixed;
        bottom: 30px;
        right: 30px;
        padding: 15px 25px;
        background: #1a1a24;
        border: 1px solid rgba(74, 222, 128, 0.3);
        border-radius: 12px;
        color: #4ade80;
        font-size: 14px;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1001;
    }

    .admin-toast.show {
        transform: translateY(0);
        opacity: 1;
    }

    .admin-toast.error {
        border-color: rgba(239, 68, 68, 0.3);
        color: #ef4444;
    }

    /* Verified Badge */
    .verified-badge-admin {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-muted);
    }

    .verified-badge-admin.verified {
        background: rgba(59, 130, 246, 0.15);
        color: #3b82f6;
    }

    /* Verify Button */
    .verify-btn:hover {
        background: rgba(59, 130, 246, 0.15);
        border-color: rgba(59, 130, 246, 0.3);
        color: #3b82f6;
    }

    .verify-btn.active {
        background: rgba(59, 130, 246, 0.2);
        border-color: rgba(59, 130, 246, 0.4);
        color: #3b82f6;
    }
</style>
